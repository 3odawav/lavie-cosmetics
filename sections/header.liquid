{% comment %}
  LAVIE COSMETICS HEADER
  Converted from Next.js to Shopify Liquid
{% endcomment %}

<header id="shopify-header" class="fixed top-0 left-0 right-0 z-50 transition-all duration-300 bg-transparent">
  <div class="container mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-20">
      
      <!-- Desktop Left Navigation -->
      <nav class="hidden md:flex md:items-center md:space-x-8 w-1/3" id="desktop-nav">
        <a href="{{ routes.root_url }}" 
           class="nav-link {% if template == 'index' %}text-brand-pink dark:text-white font-bold{% endif %}">
          Home
        </a>
        <a href="{{ routes.all_products_collection_url }}" 
           class="nav-link {% if template == 'collection' or template == 'product' %}text-brand-pink dark:text-white font-bold{% endif %}">
          Shop
        </a>
        <a href="/pages/about" 
           class="nav-link {% if page.handle == 'about' %}text-brand-pink dark:text-white font-bold{% endif %}">
          About
        </a>
        <a href="/pages/contact" 
           class="nav-link {% if page.handle == 'contact' %}text-brand-pink dark:text-white font-bold{% endif %}">
          Contact Us
        </a>
        <a href="/pages/tracking" 
           class="nav-link {% if page.handle == 'tracking' %}text-brand-pink dark:text-white font-bold{% endif %}">
          Track Order
        </a>
      </nav>

      <!-- Logo - Centered -->
      <div class="flex-1 flex justify-center md:w-1/3">
        <a href="{{ routes.root_url }}">
          <img 
            id="header-logo"
            src="https://i.ibb.co/xSkmkymJ/9-1.png" 
            alt="{{ shop.name }}" 
            width="56" 
            height="56" 
            class="h-14 w-14 object-contain drop-shadow-[0_2px_2px_rgba(0,0,0,0.7)]"
          />
        </a>
      </div>

      <!-- Icons & Actions - Right -->
      <div class="flex items-center justify-end space-x-3 md:space-x-4 w-1/3">
        
        <!-- Language Toggle -->
        <button 
          onclick="toggleLanguage()" 
          class="icon-button"
          aria-label="Change Language">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"></path>
            <path d="M2 12h20"></path>
          </svg>
        </button>

        <!-- Dark Mode Toggle -->
        <button 
          onclick="toggleTheme()" 
          class="icon-button"
          id="theme-toggle"
          aria-label="Toggle Theme">
          <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path>
          </svg>
          <svg class="sun-icon hidden" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="4"></circle>
            <path d="M12 2v2"></path>
            <path d="M12 20v2"></path>
            <path d="m4.93 4.93 1.41 1.41"></path>
            <path d="m17.66 17.66 1.41 1.41"></path>
            <path d="M2 12h2"></path>
            <path d="M20 12h2"></path>
            <path d="m6.34 17.66-1.41 1.41"></path>
            <path d="m19.07 4.93-1.41 1.41"></path>
          </svg>
        </button>

        <!-- Shopping Cart -->
        <a href="{{ routes.cart_url }}" class="icon-button relative">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="8" cy="21" r="1"></circle>
            <circle cx="19" cy="21" r="1"></circle>
            <path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"></path>
          </svg>
          {% if cart.item_count > 0 %}
            <span class="absolute -top-2 -right-2 bg-brand-pink text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-semibold">
              {{ cart.item_count }}
            </span>
          {% endif %}
        </a>

        <!-- Mobile Menu Toggle -->
        <button 
          onclick="toggleMobileMenu()" 
          class="icon-button md:hidden z-50"
          id="mobile-menu-btn"
          aria-label="Menu">
          <svg class="menu-icon" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="4" x2="20" y1="12" y2="12"></line>
            <line x1="4" x2="20" y1="6" y2="6"></line>
            <line x1="4" x2="20" y1="18" y2="18"></line>
          </svg>
          <svg class="close-icon hidden" xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>

        <!-- Desktop User Icon -->
        <a href="{{ routes.account_url }}" class="icon-button hidden md:block">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
          </svg>
        </a>

      </div>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div id="mobile-menu" class="fixed inset-0 bg-white dark:bg-black z-40 transform translate-x-full transition-transform duration-300 ease-in-out md:hidden">
    <div class="flex flex-col items-center justify-center h-full space-y-6 text-xl pt-20">
      <a href="{{ routes.root_url }}" 
         class="mobile-nav-link {% if template == 'index' %}text-brand-pink dark:text-white font-bold{% endif %}" 
         onclick="closeMobileMenu()">
        Home
      </a>
      <a href="{{ routes.all_products_collection_url }}" 
         class="mobile-nav-link {% if template == 'collection' or template == 'product' %}text-brand-pink dark:text-white font-bold{% endif %}" 
         onclick="closeMobileMenu()">
        Shop
      </a>
      <a href="/pages/about" 
         class="mobile-nav-link {% if page.handle == 'about' %}text-brand-pink dark:text-white font-bold{% endif %}" 
         onclick="closeMobileMenu()">
        About
      </a>
      <a href="/pages/contact" 
         class="mobile-nav-link {% if page.handle == 'contact' %}text-brand-pink dark:text-white font-bold{% endif %}" 
         onclick="closeMobileMenu()">
        Contact Us
      </a>
      <a href="/pages/tracking" 
         class="mobile-nav-link {% if page.handle == 'tracking' %}text-brand-pink dark:text-white font-bold{% endif %}" 
         onclick="closeMobileMenu()">
        Track Order
      </a>
      <a href="{{ routes.account_url }}" 
         class="mobile-nav-link flex items-center gap-2" 
         onclick="closeMobileMenu()">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
          <circle cx="12" cy="7" r="4"></circle>
        </svg>
        <span>Login</span>
      </a>
    </div>
  </div>
</header>

<style>
.nav-link,
.icon-button {
  color: white;
  transition: color 0.3s ease, transform 0.2s ease;
}

.dark .nav-link,
.dark .icon-button {
  color: #DAA520;
}

.nav-link:hover,
.icon-button:hover {
  color: #E91E63;
  transform: translateY(-1px);
}

.dark .nav-link:hover,
.dark .icon-button:hover {
  color: white;
}

#shopify-header.scrolled,
#shopify-header.not-home {
  background-color: rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(8px);
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
}

.dark #shopify-header.scrolled,
.dark #shopify-header.not-home {
  background-color: rgba(0, 0, 0, 0.8);
}

#shopify-header.scrolled .nav-link,
#shopify-header.scrolled .icon-button,
#shopify-header.not-home .nav-link,
#shopify-header.not-home .icon-button {
  color: #1F2937;
}

.dark #shopify-header.scrolled .nav-link,
.dark #shopify-header.scrolled .icon-button,
.dark #shopify-header.not-home .nav-link,
.dark #shopify-header.not-home .icon-button {
  color: #DAA520;
}

.mobile-nav-link {
  color: #1F2937;
  transition: color 0.3s ease;
}

.dark .mobile-nav-link {
  color: #DAA520;
}

.mobile-nav-link:hover {
  color: #E91E63;
}

.dark .mobile-nav-link:hover {
  color: white;
}
</style>

<script>
(function() {
  var header = document.getElementById('shopify-header');
  var mobileMenu = document.getElementById('mobile-menu');
  var menuBtn = document.getElementById('mobile-menu-btn');
  var logo = document.getElementById('header-logo');
  var themeToggle = document.getElementById('theme-toggle');
  
  var goldLogo = 'https://i.ibb.co/xSkmkymJ/9-1.png';
  var whiteLogo = 'https://i.ibb.co/xSkmkymJ/9-1.png';
  
  var isHomePage = {% if template == 'index' %}true{% else %}false{% endif %};

  function handleScroll() {
    var scrolled = window.scrollY > 10;
    
    if (scrolled || !isHomePage) {
      header.classList.add('scrolled');
      if (!isHomePage) header.classList.add('not-home');
    } else {
      header.classList.remove('scrolled', 'not-home');
    }
    
    updateLogo();
  }

  function updateLogo() {
    var isDark = document.documentElement.classList.contains('dark');
    var scrolled = window.scrollY > 10;
    
    if (isDark) {
      logo.src = goldLogo;
    } else if (scrolled || !isHomePage) {
      logo.src = goldLogo;
    } else {
      logo.src = whiteLogo;
    }
  }

  window.toggleTheme = function() {
    var html = document.documentElement;
    var isDark = html.classList.contains('dark');
    
    if (isDark) {
      html.classList.remove('dark');
      localStorage.setItem('theme', 'light');
      themeToggle.querySelector('.moon-icon').classList.remove('hidden');
      themeToggle.querySelector('.sun-icon').classList.add('hidden');
    } else {
      html.classList.add('dark');
      localStorage.setItem('theme', 'dark');
      themeToggle.querySelector('.moon-icon').classList.add('hidden');
      themeToggle.querySelector('.sun-icon').classList.remove('hidden');
    }
    
    updateLogo();
  };

  window.toggleLanguage = function() {
    var currentLang = document.documentElement.lang || 'en';
    var newLang = currentLang === 'en' ? 'ar' : 'en';
    var currentPath = window.location.pathname;
    
    if (newLang === 'ar') {
      window.location.href = '/ar' + currentPath;
    } else {
      window.location.href = currentPath.replace('/ar', '');
    }
  };

  window.toggleMobileMenu = function() {
    var isOpen = !mobileMenu.classList.contains('translate-x-full');
    
    if (isOpen) {
      mobileMenu.classList.add('translate-x-full');
      menuBtn.querySelector('.menu-icon').classList.remove('hidden');
      menuBtn.querySelector('.close-icon').classList.add('hidden');
      document.body.style.overflow = '';
    } else {
      mobileMenu.classList.remove('translate-x-full');
      menuBtn.querySelector('.menu-icon').classList.add('hidden');
      menuBtn.querySelector('.close-icon').classList.remove('hidden');
      document.body.style.overflow = 'hidden';
    }
  };

  window.closeMobileMenu = function() {
    mobileMenu.classList.add('translate-x-full');
    menuBtn.querySelector('.menu-icon').classList.remove('hidden');
    menuBtn.querySelector('.close-icon').classList.add('hidden');
    document.body.style.overflow = '';
  };

  window.addEventListener('scroll', handleScroll);
  
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', handleScroll);
  } else {
    handleScroll();
  }

  var savedTheme = localStorage.getItem('theme');
  if (savedTheme === 'dark' || (!savedTheme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
    document.documentElement.classList.add('dark');
    if (themeToggle) {
      themeToggle.querySelector('.moon-icon').classList.add('hidden');
      themeToggle.querySelector('.sun-icon').classList.remove('hidden');
    }
  }
  
  updateLogo();
})();
</script>

{% schema %}
{
  "name": "Header",
  "settings": []
}
{% endschema %}
