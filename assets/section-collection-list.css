{% comment %}
  Collage Section - Image gallery layout
{% endcomment %}

<div class="collage-section py-20">
  <div class="container mx-auto px-4">
    
    {% if section.settings.heading != blank %}
      <h2 class="text-4xl caveat-heading text-center mb-12">
        {{ section.settings.heading }}
      </h2>
    {% endif %}

    <div class="collage-grid grid grid-cols-2 md:grid-cols-4 gap-4">
      {% for block in section.blocks %}
        <div class="collage-item {% if block.settings.span_2 %}md:col-span-2{% endif %} {% if block.settings.span_rows %}md:row-span-2{% endif %}" {{ block.shopify_attributes }}>
          {% if block.settings.image != blank %}
            <img 
              src="{{ block.settings.image | image_url: width: 800 }}" 
              alt="{{ block.settings.image.alt | escape }}"
              class="w-full h-full object-cover rounded-lg hover:scale-105 transition-transform duration-300"
              loading="lazy"
            />
          {% else %}
            <div class="bg-gray-200 dark:bg-zinc-800 rounded-lg h-64"></div>
          {% endif %}
        </div>
      {% endfor %}
    </div>

  </div>
</div>

<style>
.collage-item {
  overflow: hidden;
  border-radius: 12px;
}

.collage-grid {
  grid-auto-rows: 250px;
}

@media (min-width: 768px) {
  .collage-grid {
    grid-auto-rows: 300px;
  }
}
</style>

{% schema %}
{
  "name": "Collage",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Our Gallery"
    }
  ],
  "blocks": [
    {
      "type": "image",
      "name": "Image",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "checkbox",
          "id": "span_2",
          "label": "Span 2 Columns",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "span_rows",
          "label": "Span 2 Rows",
          "default": false
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Collage"
    }
  ]
}
{% endschema %}
